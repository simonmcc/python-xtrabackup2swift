#!/usr/bin/env python

import os
import logging

import xtrabackup2swift


use_swift = True


(options, args) = xtrabackup2swift.cli_options()

log_file = options.log_file

auth_url = options.auth_url
if auth_url == "":
    auth_url = os.environ.get('OS_AUTH_URL', '')

tenant_name = options.tenant_name
if tenant_name == "":
    tenant_name = os.environ.get('OS_TENANT_NAME', '')

password = options.password
if password == "":
    password = os.environ.get('OS_PASSWORD', '')

username = options.username
if username == "":
    username = os.environ.get('OS_USERNAME', '')

container = options.container
if container == "":
    container = os.environ.get('BACKUP_CONTAINER', 'db_backup')

logging.StreamHandler(stream=log_file)

logging.basicConfig(filename=log_file,
                    level=logging.INFO)

LOG = logging.getLogger(__name__)

if __name__ == '__main__':
    xtrabackup2swift.run_backup(options)
